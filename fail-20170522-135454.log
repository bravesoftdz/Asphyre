Mon May 22 13:54:54 EDT 2017

Typical failure on debian/x64 with 6 other ultibo/qemuvpb kernels active.
Number of trials before failure can be as low as 10, as high as 100.

qemu-system-arm \
        -M versatilepb -cpu cortex-a8 \
        -m 64M -serial stdio \
        -net none -display none \
        -kernel artifacts/QEMUVPB/kernel.bin

002761A8 - Device: Sending device notification (Name=Keyboard0 Class=DEVICE_CLASS_KEYBOARD Notification=DEVICE_NOTIFICATION_REGISTER)
002761A8 - Device: Registered device (Handle=02FD05E4 Class=DEVICE_CLASS_KEYBOARD Name=Keyboard0)
002761A8 - Device: Sending device notification (Name=Keyboard0 Class=DEVICE_CLASS_KEYBOARD Notification=DEVICE_NOTIFICATION_ATTACH)
002761A8 - Device: Sending device notification (Name=Mouse0 Class=DEVICE_CLASS_MOUSE Notification=DEVICE_NOTIFICATION_REGISTER)
002761A8 - Device: Registered device (Handle=02FD4080 Class=DEVICE_CLASS_MOUSE Name=Mouse0)
002761A8 - Device: Sending device notification (Name=Mouse0 Class=DEVICE_CLASS_MOUSE Notification=DEVICE_NOTIFICATION_ATTACH)
002761A8 - Device: Sending device notification (Name=Framebuffer0 Class=DEVICE_CLASS_FRAMEBUFFER Notification=DEVICE_NOTIFICATION_REGISTER)
002761A8 - Device: Registered device (Handle=02FE6ED8 Class=DEVICE_CLASS_FRAMEBUFFER Name=Framebuffer0)
002761A8 - Device: Sending device notification (Name=Framebuffer0 Class=DEVICE_CLASS_FRAMEBUFFER Notification=DEVICE_NOTIFICATION_ENABLE)
002761A8 - Device: Sending device notification (Name=Console0 Class=DEVICE_CLASS_CONSOLE Notification=DEVICE_NOTIFICATION_REGISTER)
002761A8 - Device: Registered device (Handle=032F81C8 Class=DEVICE_CLASS_CONSOLE Name=Console0)
002761A8 - Device: Sending device notification (Name=Console0 Class=DEVICE_CLASS_CONSOLE Notification=DEVICE_NOTIFICATION_OPEN)
00000000000005A9 - 002761A8 - Device: Sending device notification (Name=Logging2 Class=DEVICE_CLASS_LOGGING Notification=DEVICE_NOTIFICATION_REGISTER)
00000000000005B0 - 028A2F48 - USB: Successfully initialized USB subsystem
00000000000005B0 - 002761A8 - Device: Registered device (Handle=033A05E0 Class=DEVICE_CLASS_LOGGING Name=Logging2)
00000000000005C0 - 002761A8 - Device: Sending device notification (Name=Serial0 Class=DEVICE_CLASS_SERIAL Notification=DEVICE_NOTIFICATION_OPENING)

test failed - program never reached 'program start'

program Basic;
{$mode delphi}{$H+}

uses
 GlobalConfig,GlobalConst,GlobalTypes,Logging,
 Platform,QEMUVersatilePB,Serial,SysUtils,Threads;

begin
 try
  try
   LOGGING_INCLUDE_COUNTER:=False;
   LOGGING_INCLUDE_TICKCOUNT:=True;
   SERIAL_REGISTER_LOGGING:=True;
   SerialLoggingDeviceAdd(SerialDeviceGetDefault);
   LoggingDeviceSetDefault(LoggingDeviceFindByType(LOGGING_TYPE_SERIAL));
   LoggingOutput('program start');
   LoggingOutput('test succeeded');
  except on E:Exception do
   begin
    LoggingOutput(Format('Exception: %s',[E.Message]));
   end;
  end;
 finally
  LoggingOutput('program stop');
  ThreadHalt(1 * 1000);
 end;
end.
